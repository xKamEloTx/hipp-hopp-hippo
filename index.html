<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>HIPP HOPP HIPPO üé≤</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      background-color: #f0f8ff;
      padding: 20px;
    }
    h1 {
      color: #333;
    }
    .dice-container {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 30px;
    }
    .die {
      width: 120px;
      height: 120px;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0,0,0,0.15);
      overflow: hidden;
      cursor: pointer;
      position: relative;
      perspective: 600px;
      user-select: none;
      background-color: #444;
      color: white;
      font-weight: 700;
      font-size: 48px;
    }
    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ "–ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è" */
    .face-container {
      height: 100%;
      width: 100%;
      overflow: hidden;
      position: relative;
    }
    /* –í—Å–µ "–ª–∏—Å—Ç—ã" –ª–∏—Ü */
    .faces {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      transition: transform 0.6s ease-in-out;
    }
    .face {
      height: 120px;
      display: flex;
      justify-content: center;
      align-items: center;
      user-select: none;
      border-radius: 15px;
    }
    /* –ß–∏—Å–ª–æ–≤–æ–π –∫—É–±–∏–∫ */
    .number-die .face {
      background-color: #444;
      color: white;
      font-size: 64px;
      font-weight: 800;
      box-shadow: inset 0 0 15px rgba(0,0,0,0.3);
    }
    /* –¶–≤–µ—Ç–Ω–æ–π –∫—É–±–∏–∫ */
    .color-die .face {
      font-size: 72px;
      font-weight: 900;
      box-shadow: inset 0 0 15px rgba(0,0,0,0.3);
    }
    /* –¶–≤–µ—Ç–Ω–æ–π –∫—É–±–∏–∫ –æ–±—ã—á–Ω—ã–π —Ü–≤–µ—Ç–Ω–æ–π –∫–≤–∞–¥—Ä–∞—Ç */
    .color-square {
      width: 100%;
      height: 100%;
      border-radius: 15px;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.4);
    }

    button.btn {
      margin-top: 30px;
      padding: 14px 28px;
      font-size: 20px;
      border: none;
      background-color: #0077cc;
      color: white;
      border-radius: 12px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    button.btn:hover:not(:disabled) {
      background-color: #005fa3;
    }
    button.btn:disabled {
      background-color: #999;
      cursor: default;
    }
    .result {
      margin-top: 30px;
      font-size: 20px;
      min-height: 40px;
      color: #222;
    }
  </style>
</head>
<body>
  <h1>üé≤ HIPP HOPP HIPPO üé≤</h1>
  <p>–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –±—Ä–æ—Å–∏—Ç—å –¥–≤–∞ –∫—É–±–∏–∫–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π!</p>
  <button class="btn" id="rollBtn">–ë—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫–∏</button>

  <div class="dice-container" style="margin-top:40px;">
    <div class="die number-die" aria-label="–ß–∏—Å–ª–æ–≤–æ–π –∫—É–±–∏–∫" role="img">
      <div class="face-container">
        <div class="faces" id="numberFaces">
          <!-- –õ–∏—Ü–∞ —á–∏—Å–ª–æ–≤–æ–≥–æ –∫—É–±–∏–∫–∞: 2, 3, 4 (–ø–æ–≤—Ç–æ—Ä—è–µ–º —á—Ç–æ–±—ã –∞–Ω–∏–º–∞—Ü–∏—è –ª–∏—Å—Ç–∞–ª–∞) -->
          <div class="face">2</div>
          <div class="face">3</div>
          <div class="face">4</div>
          <div class="face">2</div>
          <div class="face">3</div>
          <div class="face">4</div>
        </div>
      </div>
    </div>
    <div class="die color-die" aria-label="–¶–≤–µ—Ç–Ω–æ–π –∫—É–±–∏–∫" role="img">
      <div class="face-container">
        <div class="faces" id="colorFaces">
          <!-- –õ–∏—Ü–∞ —Ü–≤–µ—Ç–Ω–æ–≥–æ –∫—É–±–∏–∫–∞: —Ü–≤–µ—Ç–∞ + –±–µ–≥–µ–º–æ—Ç -->
          <div class="face"><div class="color-square" style="background-color: gold;"></div></div>
          <div class="face"><div class="color-square" style="background-color: dodgerblue;"></div></div>
          <div class="face"><div class="color-square" style="background-color: purple;"></div></div>
          <div class="face"><div class="color-square" style="background-color: green;"></div></div>
          <div class="face"><div class="color-square" style="background-color: crimson;"></div></div>
          <div class="face" style="font-size: 72px; color: #333; background: white; display: flex; justify-content: center; align-items: center; border-radius: 15px;">ü¶õ</div>
        </div>
      </div>
    </div>
  </div>

  <div class="result" id="resultText"></div>

  <!-- –ó–≤—É–∫ –±—Ä–æ—Å–∫–∞ -->
  <audio id="rollSound" src="https://freesound.org/data/previews/66/66717_931655-lq.mp3"></audio>

  <script>
    const numberDieValues = [2, 3, 4]; // —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ª–∏—Ü–∞ –¥–ª—è –ª–∏—Å—Ç–∞–Ω–∏—è
    // –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ª–∏—Å—Ç–∞–Ω–∏—è –≤ numberFaces: 0..5 (–ø–æ —Ü–∏–∫–ª—É)
    // numberFaces 6 –ª–∏—Ü –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ –ª–∏—Å—Ç–∞–Ω–∏—è, –≤ JS –±—É–¥–µ–º –≤—ã—á–∏—Å–ª—è—Ç—å –ø–æ–∑–∏—Ü–∏—é

    const colorDieValues = [
      { color: "gold", label: "–ñ—ë–ª—Ç—ã–π" },
      { color: "dodgerblue", label: "–°–∏–Ω–∏–π" },
      { color: "purple", label: "–§–∏–æ–ª–µ—Ç–æ–≤—ã–π" },
      { color: "green", label: "–ó–µ–ª—ë–Ω—ã–π" },
      { color: "crimson", label: "–ö—Ä–∞—Å–Ω—ã–π" },
      { color: "white", label: "–ë–µ–≥–µ–º–æ—Ç", isHippo: true }
    ];

    const numberFaces = document.getElementById('numberFaces');
    const colorFaces = document.getElementById('colorFaces');
    const resultText = document.getElementById('resultText');
    const rollBtn = document.getElementById('rollBtn');
    const rollSound = document.getElementById('rollSound');

    const faceHeight = 120; // px

    // –î–ª—è –ª–∏—Å—Ç–∞–Ω–∏—è –ª–∏—Ü –∫—É–±–∏–∫–æ–≤ ‚Äî –≤—ã—á–∏—Å–ª—è–µ–º —Å–º–µ—â–µ–Ω–∏–µ transform: translateY(-N * faceHeight)

    // –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Ä–∞–Ω–¥–æ–º –∏–Ω–¥–µ–∫—Å –¥–ª—è –ª–∏—Å—Ç–∞–Ω–∏—è –ø–æ 6 –ª–∏—Ü–∞–º numberFaces
    function getRandomNumberFaceIndex() {
      // possible –ª–∏—Ü–∞: 0=2,1=3,2=4,3=2,4=3,5=4
      // –•–æ—Ç–∏–º –≤—ã–±—Ä–∞—Ç—å –∏–º–µ–Ω–Ω–æ 2,3 –∏–ª–∏ 4 ‚Äî –Ω–æ –º–æ–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é –≤—ã–±—Ä–∞—Ç—å 0..5
      return Math.floor(Math.random() * 6);
    }

    function getRandomColorFaceIndex() {
      return Math.floor(Math.random() * 6);
    }

    function rollDice() {
      rollBtn.disabled = true;
      resultText.textContent = '';

      // –ó–∞–ø—É—Å–∫–∞–µ–º –∑–≤—É–∫ –±—Ä–æ—Å–∫–∞
      rollSound.currentTime = 0;
      rollSound.play();

      // –ù–∞—á–∏–Ω–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ª–∏—Å—Ç–∞–Ω–∏—è ‚Äî –±—ã—Å—Ç—Ä–∞—è —Å–º–µ–Ω–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π 30 —Ä–∞–∑ –∑–∞ —Å–µ–∫—É–Ω–¥—É
      let frames = 30;
      let currentFrame = 0;

      const animationInterval = setInterval(() => {
        currentFrame++;

        // –†–∞–Ω–¥–æ–º–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è –ª–∏—Å—Ç–∞–Ω–∏—è
        const numIndex = Math.floor(Math.random() * 6);
        const colIndex = Math.floor(Math.random() * 6);

        numberFaces.style.transform = `translateY(-${numIndex * faceHeight}px)`;
        colorFaces.style.transform = `translateY(-${colIndex * faceHeight}px)`;

        if (currentFrame >= frames) {
          clearInterval(animationInterval);
          showResult();
        }
      }, 33); // ~30 fps
    }

    function showResult() {
      // –í—ã–±–∏—Ä–∞–µ–º –∏—Ç–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
      // –ß–∏—Å–ª–æ ‚Äî –≤—ã–±–∏—Ä–∞–µ–º 2,3 –∏–ª–∏ 4, –ø–æ—Ç–æ–º –Ω–∞—Ö–æ–¥–∏–º –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∏–Ω–¥–µ–∫—Å –≤ numberFaces (0..5)
      // –£ –Ω–∞—Å 6 –ª–∏—Ü ‚Äî 0 –∏ 3 = 2; 1 –∏ 4 = 3; 2 –∏ 5 = 4

      // –ß—Ç–æ–±—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —á–∏—Å–ª–æ:
      // –í—ã–±–∏—Ä–∞–µ–º —á–∏—Å–ª–æ –∏–∑ [2,2,2,3,3,4] –æ—Ä–∏–≥–∏–Ω–∞–ª–∞, –Ω–æ –¥–ª—è –ª–∏—Å—Ç–∞–Ω–∏—è 6 –ª–∏—Ü ‚Äî 2,3,4 –ø–æ 2 —Ä–∞–∑–∞
      // –ù–æ —É –Ω–∞—Å –ª–∏—Å—Ç–∞–Ω–∏–µ –ø–æ 6 –ø–æ–∑–∏—Ü–∏—è–º, —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (2,3,4,2,3,4)

      // –î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è ‚Äî –≤–æ–∑—å–º—ë–º —Å–ª—É—á–∞–π–Ω—ã–π –∏–Ω–¥–µ–∫—Å 0..5 –¥–ª—è –ª–∏—Å—Ç–∞–Ω–∏—è, —Ç–æ–≥–¥–∞
      // –∏–Ω–¥–µ–∫—Å 0,3 = 2
      // –∏–Ω–¥–µ–∫—Å 1,4 = 3
      // –∏–Ω–¥–µ–∫—Å 2,5 = 4

      // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è —Ü–≤–µ—Ç–Ω–æ–≥–æ –∫—É–±–∏–∫–∞ 0..5 ‚Äî —Ü–≤–µ—Ç–∞ + –±–µ–≥–µ–º–æ—Ç

      // –ß–∏—Å–ª–æ–≤–æ–π –∫—É–±–∏–∫ (—Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞)
      const originalNumberDie = [2, 2, 2, 3, 3, 4];
      const finalNumber = originalNumberDie[Math.floor(Math.random() * originalNumberDie.length)];

      // –ù–∞–π–¥–µ–º –∏–Ω–¥–µ–∫—Å –≤ numberFaces –¥–ª—è finalNumber (–ø–µ—Ä–≤–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
      // –í numberFaces 6 –ª–∏—Ü: [2,3,4,2,3,4]
      const numberFacesValues = [2,3,4,2,3,4];
      let numberIndex = numberFacesValues.indexOf(finalNumber);

      // –¶–≤–µ—Ç–Ω–æ–π –∫—É–±–∏–∫
      const finalColor = colorDieValues[Math.floor(Math.random() * colorDieValues.length)];
      const colorIndex = colorDieValues.indexOf(finalColor);

      // –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è –∫ –∏—Ç–æ–≥–æ–≤–æ–º—É –ª–∏—Ü—É —Å –ø–ª–∞–≤–Ω—ã–º –ø–µ—Ä–µ—Ö–æ–¥–æ–º
      numberFaces.style.transition = 'transform 0.6s ease-in-out';
      colorFaces.style.transition = 'transform 0.6s ease-in-out';

      numberFaces.style.transform = `translateY(-${numberIndex * faceHeight}px)`;
      colorFaces.style.transform = `translateY(-${colorIndex * faceHeight}px)`;

      // –ü–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
      setTimeout(() => {
        resultText.textContent = '';
        if (finalColor.isHippo) {
          resultText.innerHTML = "ü¶õ –í—ã–ø–∞–ª <b>–ë–µ–≥–µ–º–æ—Ç</b>! –°–ª—É—á–∞–π–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ!";
        } else {
          resultText.textContent = `–í—ã–ø–∞–ª —Ü–≤–µ—Ç –∏ —á–∏—Å–ª–æ: ${finalNumber}`;
        }
        rollBtn.disabled = false;
      }, 700);
    }

    rollBtn.addEventListener('click', rollDice);
  </script>
</body>
</html>
